{
  "permissions": {
    "allow": [
      "Bash(gh pr view:*)",
      "Bash(gh pr list:*)",
      "Bash(git checkout:*)",
      "Bash(git log:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(git restore:*)",
      "Bash(cat:*)",
      "Bash(npm run check:*)",
      "Bash(pkill:*)",
      "Bash(npm run build:*)",
      "Bash(gh pr close:*)",
      "Bash(gh pr create --repo Gnathonic/mokuro-reader --title \"Implement Drive placeholder and download system\" --body \"$(cat <<''EOF''\n## Summary\n- Implemented placeholder system for Drive-only volumes and series\n- Added download functionality to convert placeholders to real volumes\n- Created visual components to distinguish Drive-only content\n\n## Changes\n\n### Type Extensions\n- Extended `VolumeMetadata` with placeholder fields (`isPlaceholder`, `driveFileId`, `driveModifiedTime`, `driveSize`)\n\n### Placeholder System\n- Created `src/lib/catalog/placeholders.ts` with reconciliation logic\n- Generates temporary UUIDs for placeholders until mokuro metadata is available\n- Compares local volumes with Drive cache to identify Drive-only content\n- Updated catalog store to merge local and placeholder volumes\n\n### UI Components\n- **PlaceholderVolumeItem**: Shows cloud icon, file size, and download button for Drive-only volumes\n- **PlaceholderCatalogItem**: Shows placeholder series with cloud badge and volume count\n- Updated Catalog and series pages to render placeholders in both grid and list views\n\n### Download Functionality\n- Implemented `downloadVolumeFromDrive()` function that:\n  - Downloads CBZ from Drive\n  - Extracts ZIP to read .mokuro JSON and images\n  - Creates real VolumeMetadata with actual UUIDs\n  - Writes to IndexedDB\n  - Removes placeholder from Drive cache\n- Added bulk series download with progress tracking\n- Download progress persists across navigation via progressTrackerStore\n\n## Test plan\n- [ ] Sign in to Google Drive\n- [ ] Verify placeholder volumes show in series pages with cloud icons\n- [ ] Verify placeholder series show in catalog with \"In Drive\" badge\n- [ ] Test downloading individual placeholder volumes\n- [ ] Test bulk series download button\n- [ ] Verify placeholders disappear after successful download\n- [ ] Verify downloaded volumes work correctly in reader\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\nEOF\n)\")"
    ],
    "deny": [],
    "ask": []
  }
}